---
import '../assets/base.css';

interface Props {
  title?: string;
  description?: string;
  heading?: string;
  subheading?: string;
}

const {
  title = 'StravaGoals ‚Äî Dostƒôp do konta',
  description = 'Formularze logowania i rejestracji dla aplikacji StravaGoals',
  heading = 'Witaj ponownie',
  subheading = 'Zaloguj siƒô, aby kontynuowaƒá plan treningowy',
} = Astro.props;
---

<!doctype html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <title>{title}</title>
    <script is:inline>
      (function () {
        try {
          const storageKey = 'stravagoals-theme';
          const root = document.documentElement;
          const stored = window.localStorage.getItem(storageKey);
          const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          const theme =
            stored === 'dark' || stored === 'light'
              ? stored
              : prefersDark
                ? 'dark'
                : 'light';
          root.classList.toggle('dark', theme === 'dark');
        } catch (error) {
          console.warn('Theme init failed', error);
        }
      })();
    </script>
  </head>
  <body class="auth-body">
    <div class="auth-wrapper">
      <main class="auth-panel" aria-label="Panel autentykacji">
        <a href="/" class="auth-logo" aria-label="Przejd≈∫ do strony g≈Ç√≥wnej StravaGoals">
          <span class="auth-logo-icon">üèÉ‚Äç‚ôÇÔ∏è</span>
          <span class="auth-logo-text">StravaGoals</span>
        </a>

        <section class="auth-card" aria-live="polite">
          <header class="auth-header">
            <p class="auth-kicker">Bezpieczne logowanie</p>
            <h1>{heading}</h1>
            <p class="auth-subheading">{subheading}</p>
          </header>

          <slot name="notice" />
          <slot />
        </section>

        <div class="auth-links">
          <slot name="links">
            <p class="text-sm text-muted-foreground">
              Nie masz jeszcze konta? <a href="/auth/register">Utw√≥rz je teraz</a>.
            </p>
          </slot>
        </div>
      </main>

      <aside class="auth-aside" aria-label="Informacje o aplikacji">
        <slot name="aside">
          <div class="auth-aside-panel">
            <p class="aside-kicker">StravaGoals</p>
            <h2>Planuj cele na ca≈Çy rok</h2>
            <p>
              Tw√≥rz ambitne plany treningowe, obserwuj postƒôpy i wykorzystuj generowane pomys≈Çy
              na kolejne aktywno≈õci.
            </p>
            <ul>
              <li>üéØ Klarowne cele i wska≈∫niki</li>
              <li>üìà Wizualizacja postƒôp√≥w</li>
              <li>ü§ñ Szybkie sugestie od AI</li>
            </ul>
          </div>
        </slot>
      </aside>
    </div>
  </body>
</html>

<style>
  .auth-body {
    margin: 0;
    min-height: 100vh;
    background: radial-gradient(circle at top, hsl(var(--accent) / 0.35), transparent 55%),
      hsl(var(--background));
    color: hsl(var(--foreground));
  }

  .auth-wrapper {
    min-height: 100vh;
    display: grid;
    grid-template-columns: 1fr;
  }

  @media (min-width: 960px) {
    .auth-wrapper {
      grid-template-columns: minmax(0, 640px) 1fr;
    }
  }

  .auth-panel {
    width: 100%;
    max-width: 560px;
    margin: 0 auto;
    padding: 2rem clamp(1.5rem, 3vw, 3rem);
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .auth-logo {
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 1.3rem;
    font-weight: 600;
    color: hsl(var(--foreground));
    text-decoration: none;
  }

  .auth-logo-icon {
    font-size: 1.8rem;
  }

  .auth-card {
    background: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    border-radius: var(--radius-xl);
    padding: clamp(1.5rem, 3vw, 2.5rem);
    box-shadow:
      0 10px 30px hsl(var(--foreground) / 0.08),
      0 1px 2px hsl(var(--foreground) / 0.08);
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .auth-header h1 {
    margin: 0;
    font-size: clamp(1.75rem, 4vw, 2.25rem);
  }

  .auth-kicker {
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: hsl(var(--muted-foreground));
    margin-bottom: 0.25rem;
  }

  .auth-subheading {
    margin: 0.25rem 0 0;
    color: hsl(var(--muted-foreground));
  }

  .auth-links {
    text-align: center;
    font-size: 0.95rem;
    color: hsl(var(--muted-foreground));
  }

  .auth-links a {
    color: hsl(var(--primary));
    text-decoration: none;
    font-weight: 600;
  }

  .auth-links a:hover {
    text-decoration: underline;
  }

  .auth-aside {
    display: none;
    background: linear-gradient(120deg, hsl(var(--primary) / 0.15), transparent 70%),
      radial-gradient(circle at 20% 20%, hsl(var(--accent) / 0.4), transparent 45%),
      hsl(var(--background) / 0.2);
    border-left: 1px solid hsl(var(--border) / 0.5);
  }

  @media (min-width: 960px) {
    .auth-aside {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 3rem;
    }
  }

  .auth-aside-panel {
    max-width: 420px;
    background: hsl(var(--card) / 0.75);
    border-radius: var(--radius-xl);
    padding: 2.5rem;
    border: 1px solid hsl(var(--border));
    backdrop-filter: blur(10px);
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .aside-kicker {
    font-size: 0.85rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: hsl(var(--muted-foreground));
    margin: 0;
  }

  .auth-aside-panel h2 {
    margin: 0;
    font-size: 2rem;
  }

  .auth-aside-panel ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
</style>

