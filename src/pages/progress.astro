---
import AppLayout from '../layouts/AppLayout.astro';
import ProgressPanel from '@/components/views/progress/ProgressPanel.vue';
import type { ProgressFilterState } from '@/lib/view-models/progress.js';

export const prerender = false;

const currentYear = new Date().getFullYear();
const years = Array.from({ length: 6 }, (_, index) => currentYear - index);
const initialFilters: ProgressFilterState = {
  year: currentYear,
  metric_type: 'distance',
  sport_id: null,
};
---

<AppLayout title="Postępy - StravaGoals" description="Analizuj swoje postępy i statystyki treningowe">
  <div class="page-shell">
    <header class="page-header">
      <div>
        <p class="eyebrow">Moje postępy</p>
        <h1 class="page-title">Postępy roczne</h1>
        <p class="page-subtitle">Śledź kumulację aktywności według wybranych filtrów.</p>
      </div>
    </header>

    <section class="content">
      <ProgressPanel client:load initialFilters={initialFilters} years={years} />
    </section>
  </div>
</AppLayout>

<style>
  .page-shell {
    width: 100%;
    max-width: 1080px;
    margin: 0 auto;
    padding: 1.5rem 1rem 3rem;
  }

  .page-header {
    margin-bottom: 1.5rem;
  }

  .eyebrow {
    font-size: 0.75rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: hsl(var(--muted-foreground));
  }

  .page-title {
    font-size: 2rem;
    font-weight: 700;
    color: hsl(var(--foreground));
  }

  .page-subtitle {
    margin-top: 0.35rem;
    color: hsl(var(--muted-foreground));
  }

  .content {
    margin-top: 1.5rem;
  }
</style>
